{% extends "compete_module/viewcompetitions.html" %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}
{% block events %}
<div class="container">
    <div class=" row">
        <div class="col-12 mt-4">
            <h6 class="h6">Competitions you have registered will appear here!</h6>
        </div>
    </div>
</div>
<div class="container mt-3">
    <div class="row ">
        <div style="background-color: white; border-radius: 15px; height: auto;"
            class="d-flex align-items-center col-lg-12 mb-3">
            <div class="col-lg-3">
                <h5 class="ms-2" style="margin-top: 5px;">
                    Name
                </h5>
            </div>
            <div class="col-lg-2" style="margin-top: 5px;">
                <h5 class="ms-2">
                    Posted by
                </h5>
            </div>
            <div class="col-lg-2" style="margin-top: 5px;">
                <h5 class="ms-2">
                    Assessment time
                </h5>
            </div>
            <div class="col-lg-2" style="margin-top: 5px;">
                <h5 class="ms-2">
                    Type
                </h5>
            </div>
            <div class="col-lg-2 d-flex justify-content-end" style="margin-top: 5px;">
                <h5 class="ms-2 me-3">
                    Action
                </h5>
            </div>
        </div>
        {% if registeredcompetitions %}
        {% for competitions in registeredcompetitions %}
        {% for competition in competitions %}
        <div style="background-color: white; border-radius: 15px; height: 100px;"
            class="d-flex align-items-center col-lg-12 mb-3 border">
            <div class="col-lg-3">
                <h5 class="ms-2">
                    {{competition.competitiontitle}}
                </h5>
            </div>
            <div class="col-lg-2">
                <h5 class="ms-2">
                    {{competition.posted_by}}
                </h5>
            </div>
            <div class="col-lg-2">
                <h5 class="ms-2">
                    {{competition.assessmenttime}} min
                </h5>
            </div>
            <div class="col-lg-2">
                <h5 class="ms-2">
                    {{competition.type}}
                </h5>
            </div>
            <div class="col-lg-3 d-flex justify-content-end">
                <h5 class="ms-2">
                    {% if competition.status_id == 1%}
                    <button class="btn btn-success disabled">Event not started</button>
                    {% elif competition.status_id == 2 %}
                    <input type="hidden" name="url" value=>
                    <a title="{% url 'AssessmentStartPage' competition.slug %}" class="btn btn-success"
                        onclick="window.open(this.title, '_blank', 'toolbar=1,scrollbars=1,location=1,statusbar=0,menubar=1,resizable=0,width=1980,height=1080');">Take
                        Assessment</a>
                    {% elif competition.status_id == 3 %}
                    <button class="btn btn-danger disabled">Event Ended</button>
                    {% endif %}
                </h5>
            </div>
        </div>
        {% endfor %}
        {% endfor %}
        {% else %}
        <h5>No Competitions</h5>
        {% endif %}
    </div>
</div>
<script>

    function openNewPage() {
        url = $('input[name = "url"]').val()

    }

</script>
{% endblock events %}